<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>HRUAN Stock Viewer</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body style="font-family: Arial, sans-serif; text-align: center; margin-top: 50px;">
    <h1 style="color: green;">ðŸ“ˆ Welcome to HRUAN!</h1>

    <form method="POST" action="/">
        <label>Enter Stock Symbols (comma-separated):</label><br><br>
        <input type="text" name="symbols" placeholder="AAPL, TSLA, INFY" required>
        <button type="submit">Get Info</button>
    </form>

    {% if error %}
        <p style="color: red;">{{ error }}</p>
    {% endif %}

    {% if chart_data and chart_data.datasets %}
        <h2>Stock Prices (Last 7 Days)</h2>
        <canvas id="stockChart" width="800" height="400"></canvas>

        <script>
            const labels = {{ chart_data.dates | tojson }};
            const datasets = [
                {% for dataset in chart_data.datasets %}
                {
                    label: "{{ dataset.label }}",
                    data: {{ dataset.data | tojson }},
                    borderColor: "#" + Math.floor(Math.random()*16777215).toString(16),
                    fill: false
                },
                {% endfor %}
            ];

            const config = {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: datasets
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: 'Stock Prices (Last 7 Days)'
                        }
                    }
                }
            };

            new Chart(document.getElementById('stockChart'), config);
        </script>
    {% endif %}
</body>
</html>